<div class="dashboard-container">
  <mat-card class="toolbar-card">
    <div class="toolbar-content">
      <h2>üèÉ –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∏</h2>
      <button mat-button class="logout-button" (click)="logout()">–í—ã–π—Ç–∏</button>
    </div>
  </mat-card>

  <mat-card class="main-card">
    <mat-tab-group>
      <mat-tab label="Live">
        <form *ngIf="!startTime" class="form-layout">
          <mat-form-field class="form-field">
            <mat-label>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</mat-label>
            <mat-select [(ngModel)]="newExerciseId" name="exercise" required>
              <mat-option value="" disabled>–í—ã–±–µ—Ä–∏—Ç–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</mat-option>
              <mat-option *ngFor="let ex of exercises" [value]="ex.id">{{ getExerciseIcon(ex.name) }} {{ ex.name }}</mat-option>
            </mat-select>
          </mat-form-field>

          <div class="form-buttons">
            <button mat-raised-button color="primary" (click)="startWorkout()">‚ñ∂ –ù–∞—á–∞—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</button>
          </div>
        </form>

        <div *ngIf="startTime" class="form-layout live-mode">
          <p>‚è±Ô∏è –¢—Ä–µ–Ω–∏—Ä–æ–≤–∫–∞ –∏–¥—ë—Ç... {{ getElapsedTime() }}</p>
          <button mat-raised-button color="warn" (click)="stopWorkout()">‚èπ –ó–∞–≤–µ—Ä—à–∏—Ç—å —Ç—Ä–µ–Ω–∏—Ä–æ–≤–∫—É</button>
        </div>
      </mat-tab>

      <mat-tab label="–í—Ä—É—á–Ω—É—é">
        <form class="form-layout" (ngSubmit)="addWorkout()">
          <mat-form-field class="form-field">
            <mat-label>–£–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</mat-label>
            <mat-select [(ngModel)]="newExerciseId" name="exerciseManual" required>
              <mat-option value="" disabled>–í—ã–±–µ—Ä–∏—Ç–µ —É–ø—Ä–∞–∂–Ω–µ–Ω–∏–µ</mat-option>
              <mat-option *ngFor="let ex of exercises" [value]="ex.id">{{ getExerciseIcon(ex.name) }} {{ ex.name }}</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field class="form-field">
            <mat-label>–î–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å (–º–∏–Ω)</mat-label>
            <input matInput [(ngModel)]="newDuration" name="durationManual" type="number" required>
          </mat-form-field>

          <div class="form-buttons">
            <button mat-raised-button color="accent" type="submit">üíæ –î–æ–±–∞–≤–∏—Ç—å –≤—Ä—É—á–Ω—É—é</button>
          </div>
        </form>
      </mat-tab>
    </mat-tab-group>

    <ng-container *ngIf="workouts.length; else noWorkouts">
      <p class="coach-tip" *ngIf="message">{{ message }}</p>
    </ng-container>

    <ng-template #noWorkouts>
      <p class="empty-text">–ù–µ—Ç –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Ç—Ä–µ–Ω–∏—Ä–æ–≤–æ–∫. –ù–∞—á–Ω–∏ –ø—Ä—è–º–æ —Å–µ–π—á–∞—Å! üí™</p>
    </ng-template>

    <div *ngIf="workouts.length > 0">
      <div *ngFor="let w of workouts" class="workout-row">
        <div class="workout-content">
          üìÖ <strong>{{ w.date }}</strong> ‚Ä¢ {{ getExerciseIcon(getExerciseName(w.exercise)) }} {{ getExerciseName(w.exercise) }} ‚Ä¢ ‚è±Ô∏è {{ w.duration }} –º–∏–Ω
        </div>
        <button mat-icon-button color="warn" (click)="deleteWorkout(w.id)">
          <mat-icon>delete</mat-icon>
        </button>
      </div>
    </div>
  </mat-card>

  <mat-card class="main-card mt-4">
    <h5>üéØ –¶–µ–ª—å –Ω–µ–¥–µ–ª–∏</h5>
    <mat-progress-bar mode="determinate" [value]="getProgressValue()"></mat-progress-bar>
    <p>{{ done }} / {{ goal }} –º–∏–Ω –≤—ã–ø–æ–ª–Ω–µ–Ω–æ</p>

    <p *ngIf="getProgressValue() >= 100" class="success-text">
      ‚úÖ –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º! –í—ã –≤—ã–ø–æ–ª–Ω–∏–ª–∏ –Ω–µ–¥–µ–ª—å–Ω—ã–π –ø–ª–∞–Ω! üî•
    </p>
    
  </mat-card>

  <mat-card class="main-card mt-4">
    <h5>üìä –ü—Ä–æ–≥—Ä–µ—Å—Å –ø–æ –¥–Ω—è–º</h5>
    <canvas id="workoutChart" height="100"></canvas>
  </mat-card>
</div>